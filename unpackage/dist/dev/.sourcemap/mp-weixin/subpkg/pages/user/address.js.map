{"version":3,"file":"address.js","sources":["subpkg/pages/user/address.vue","D:/谷歌下载/HBuilderX.4.85.2025110510/HBuilderX/plugins/uniapp-cli-vite/uniPage:/c3VicGtnXHBhZ2VzXHVzZXJcYWRkcmVzcy52dWU"],"sourcesContent":["<template>\n\t<view class=\"address-container\">\n\t\t<!-- 顶部导航栏 -->\n\t\t<view class=\"address-header\" :style=\"{ paddingTop: customNavBarHeight + 'px' }\">\n\t\t\t<view class=\"nav-back\" @click=\"goBack\">\n\t\t\t\t<img src=\"../../../static/arrow_logo.png\" alt=\"\" srcset=\"\" class=\"back-icon\" />\n\t\t\t</view>\n\t\t\t<text class=\"nav-title\">地址管理</text>\n\t\t\t<view class=\"nav-placeholder\"></view>\n\t\t</view>\n\n\t\t<!-- 地址列表 -->\n\t\t<view class=\"address-list\">\n\t\t\t<view v-if=\"addressList.length === 0\" class=\"empty-state\">\n\t\t\t\t<up-empty mode=\"address\" />\n\t\t\t\t<view class=\"add-first-btn\" @click=\"addAddress\">\n\t\t\t\t\t<text>添加第一个地址</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view v-else>\n\t\t\t\t<view v-for=\"(address, index) in addressList\" :key=\"address.id\" class=\"address-item\">\n\t\t\t\t\t<view class=\"address-content\" @click=\"selectAddress(address)\">\n\t\t\t\t\t\t<view class=\"address-info\">\n\t\t\t\t\t\t\t<view class=\"contact-info\">\n\t\t\t\t\t\t\t\t<text class=\"name\">{{ address.name }}</text>\n\t\t\t\t\t\t\t\t<text class=\"phone\">{{ address.phone }}</text>\n\t\t\t\t\t\t\t\t<view v-if=\"address.isDefault\" class=\"default-badge\">\n\t\t\t\t\t\t\t\t\t<text>默认</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"location-info\">\n\t\t\t\t\t\t\t\t<text class=\"region\">{{ address.province }} {{ address.city }} {{ address.district }}</text>\n\t\t\t\t\t\t\t\t<text class=\"detail\">{{ address.detail }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"address-actions\">\n\t\t\t\t\t\t<view class=\"action-btn\" @click=\"editAddress(address)\">\n\t\t\t\t\t\t\t<img src=\"../../../static/edit.png\" alt=\"\" class=\"edit-icon\">\n\t\t\t\t\t\t\t<text>编辑</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"action-btn delete\" @click=\"deleteAddress(address, index)\">\n\t\t\t\t\t\t\t<img src=\"../../../static/delete.png\" alt=\"\" class=\"delete-icon\">\n\t\t\t\t\t\t\t<text>删除</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 底部添加按钮 -->\n\t\t<view class=\"bottom-action\">\n\t\t\t<view class=\"add-address-btn\" @click=\"addAddress\">\n\t\t\t\t<text>+ 添加新地址</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\n\n// 自定义导航栏高度\nconst windowInfo = wx.getWindowInfo()\nconst menuButtonInfo = wx.getMenuButtonBoundingClientRect()\nconst customNavBarHeight = windowInfo.statusBarHeight + (menuButtonInfo.top - windowInfo.statusBarHeight)\n\n// 地址列表数据\nconst addressList = ref([])\n\n// 获取地址列表\nconst getAddressList = () => {\n\ttry {\n\t\tconst savedAddresses = uni.getStorageSync('addressList')\n\t\tif (savedAddresses) {\n\t\t\taddressList.value = savedAddresses\n\t\t}\n\t} catch (e) {\n\t\tconsole.error('获取地址列表失败:', e)\n\t}\n}\n\n// 添加地址\nconst addAddress = () => {\n\tuni.navigateTo({\n\t\turl: '/subpkg/pages/user/address-form?action=add'\n\t})\n}\n\n// 编辑地址\nconst editAddress = (address) => {\n\tuni.navigateTo({\n\t\turl: `/subpkg/pages/user/address-form?action=edit&id=${address.id}`\n\t})\n}\n\n// 选择地址（用于下单时选择）\nconst selectAddress = (address) => {\n\tconst pages = getCurrentPages()\n\tconst prevPage = pages[pages.length - 2]\n\t\n\tif (prevPage) {\n\t\t// 如果是从订单页面跳转过来的，选择地址后返回\n\t\tprevPage.$vm.selectedAddress = address\n\t\tuni.navigateBack()\n\t}\n}\n\n// 删除地址\nconst deleteAddress = (address, index) => {\n\tuni.showModal({\n\t\ttitle: '提示',\n\t\tcontent: '确定要删除这个地址吗？',\n\t\tsuccess: (res) => {\n\t\t\tif (res.confirm) {\n\t\t\t\taddressList.value.splice(index, 1)\n\t\t\t\tsaveAddressList()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '删除成功',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t})\n}\n\n// 保存地址列表到本地存储\nconst saveAddressList = () => {\n\ttry {\n\t\tuni.setStorageSync('addressList', addressList.value)\n\t} catch (e) {\n\t\tconsole.error('保存地址列表失败:', e)\n\t}\n}\n\n// 返回上一页\nconst goBack = () => {\n\tuni.navigateBack({\n\t\tdelta: 1\n\t})\n}\n\n// 页面加载时获取地址列表\nonMounted(() => {\n\tgetAddressList()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.address-container {\n\tmin-height: 100vh;\n\tbackground: #f5f5f5;\n\tpadding-bottom: 120rpx;\n}\n\n// 顶部导航栏\n.address-header {\n\tbackground: #fff;\n\tpadding: 0 32rpx;\n\tpadding-bottom: 20rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n\tposition: sticky;\n\ttop: 0;\n\tz-index: 100;\n\n\t.nav-back {\n\t\twidth: 60rpx;\n\t\theight: 60rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbackground: rgba(0, 0, 0, 0.05);\n\t\tborder-radius: 30rpx;\n\n\t\t.back-icon {\n\t\t\twidth: 32rpx;\n\t\t\theight: 32rpx;\n\t\t}\n\t}\n\n\t.nav-title {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #000;\n\t}\n\n\t.nav-placeholder {\n\t\twidth: 60rpx;\n\t}\n}\n\n// 地址列表\n.address-list {\n\tpadding: 20rpx 32rpx;\n\n\t.empty-state {\n\t\ttext-align: center;\n\t\tpadding: 100rpx 0;\n\n\t\t.add-first-btn {\n\t\t\tbackground: #FF6B35;\n\t\t\tcolor: #fff;\n\t\t\tpadding: 20rpx 60rpx;\n\t\t\tborder-radius: 50rpx;\n\t\t\tfont-size: 28rpx;\n\t\t\tmargin-top: 40rpx;\n\t\t\tdisplay: inline-block;\n\t\t}\n\t}\n\n\t.address-item {\n\t\tbackground: #fff;\n\t\tborder-radius: 16rpx;\n\t\tpadding: 30rpx;\n\t\tmargin-bottom: 20rpx;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n\n\t\t.address-content {\n\t\t\tflex: 1;\n\t\t}\n\n\t\t.address-info {\n\t\t\t.contact-info {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 20rpx;\n\n\t\t\t\t.name {\n\t\t\t\t\tfont-size: 32rpx;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t}\n\n\t\t\t\t.phone {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t\tmargin-right: 20rpx;\n\t\t\t\t}\n\n\t\t\t\t.default-badge {\n\t\t\t\t\tbackground: #FF6B35;\n\t\t\t\t\tcolor: #fff;\n\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\tpadding: 4rpx 12rpx;\n\t\t\t\t\tborder-radius: 12rpx;\n\n\t\t\t\t\ttext {\n\t\t\t\t\t\tfont-size: 20rpx;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.location-info {\n\t\t\t\t.region {\n\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t\tmargin-bottom: 8rpx;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\n\t\t\t\t.detail {\n\t\t\t\t\tfont-size: 28rpx;\n\t\t\t\t\tcolor: #333;\n\t\t\t\t\tline-height: 1.5;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.address-actions {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t\tmargin-top: 20rpx;\n\t\t\tpadding-top: 20rpx;\n\t\t\tborder-top: 1rpx solid #f0f0f0;\n\n\t\t\t.action-btn {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-left: 40rpx;\n\n\t\t\t\t.edit-icon, .delete-icon {\n\t\t\t\t\twidth: 28rpx;\n\t\t\t\t\theight: 28rpx;\n\t\t\t\t\tmargin-right: 8rpx;\n\t\t\t\t}\n\n\t\t\t\ttext {\n\t\t\t\t\tfont-size: 26rpx;\n\t\t\t\t\tcolor: #666;\n\t\t\t\t}\n\n\t\t\t\t&.delete {\n\t\t\t\t\ttext {\n\t\t\t\t\t\tcolor: #ff4757;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n// 底部添加按钮\n.bottom-action {\n\tposition: fixed;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tbackground: #fff;\n\tpadding: 20rpx 32rpx;\n\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.1);\n\tz-index: 100;\n\n\t.add-address-btn {\n\t\twidth: 100%;\n\t\tbackground: #FF6B35;\n\t\tcolor: #fff;\n\t\tpadding: 24rpx;\n\t\tborder-radius: 50rpx;\n\t\ttext-align: center;\n\t\tfont-size: 28rpx;\n\t\tfont-weight: 600;\n\t}\n}\n</style>","import MiniProgramPage from 'F:/v3/admin-app/subpkg/pages/user/address.vue'\nwx.createPage(MiniProgramPage)"],"names":["wx","ref","uni","onMounted"],"mappings":";;;;;;;;;;;;;;AAiEA,UAAM,aAAaA,cAAE,KAAC,cAAe;AACrC,UAAM,iBAAiBA,cAAE,KAAC,gCAAiC;AAC3D,UAAM,qBAAqB,WAAW,mBAAmB,eAAe,MAAM,WAAW;AAGzF,UAAM,cAAcC,cAAG,IAAC,EAAE;AAG1B,UAAM,iBAAiB,MAAM;AAC5B,UAAI;AACH,cAAM,iBAAiBC,cAAAA,MAAI,eAAe,aAAa;AACvD,YAAI,gBAAgB;AACnB,sBAAY,QAAQ;AAAA,QACpB;AAAA,MACD,SAAQ,GAAG;AACXA,sBAAAA,MAAc,MAAA,SAAA,uCAAA,aAAa,CAAC;AAAA,MAC5B;AAAA,IACF;AAGA,UAAM,aAAa,MAAM;AACxBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACP,CAAE;AAAA,IACF;AAGA,UAAM,cAAc,CAAC,YAAY;AAChCA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,kDAAkD,QAAQ,EAAE;AAAA,MACnE,CAAE;AAAA,IACF;AAGA,UAAM,gBAAgB,CAAC,YAAY;AAClC,YAAM,QAAQ,gBAAiB;AAC/B,YAAM,WAAW,MAAM,MAAM,SAAS,CAAC;AAEvC,UAAI,UAAU;AAEb,iBAAS,IAAI,kBAAkB;AAC/BA,sBAAAA,MAAI,aAAc;AAAA,MAClB;AAAA,IACF;AAGA,UAAM,gBAAgB,CAAC,SAAS,UAAU;AACzCA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,SAAS;AAChB,wBAAY,MAAM,OAAO,OAAO,CAAC;AACjC,4BAAiB;AACjBA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACX,CAAK;AAAA,UACD;AAAA,QACD;AAAA,MACH,CAAE;AAAA,IACF;AAGA,UAAM,kBAAkB,MAAM;AAC7B,UAAI;AACHA,sBAAAA,MAAI,eAAe,eAAe,YAAY,KAAK;AAAA,MACnD,SAAQ,GAAG;AACXA,sBAAAA,MAAc,MAAA,SAAA,wCAAA,aAAa,CAAC;AAAA,MAC5B;AAAA,IACF;AAGA,UAAM,SAAS,MAAM;AACpBA,oBAAAA,MAAI,aAAa;AAAA,QAChB,OAAO;AAAA,MACT,CAAE;AAAA,IACF;AAGAC,kBAAAA,UAAU,MAAM;AACf,qBAAgB;AAAA,IACjB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClJD,GAAG,WAAW,eAAe;"}